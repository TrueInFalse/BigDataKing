# 简历强相关面试题
## 1. 你对于数据仓库和数据库的理解。
- 数据仓库是为**支持企业级决策分析**而设计的专用系统，它以**主题化、集成化、稳定性和时变性**为核心特征，专注于存储**大量历史数据**并支持高效的查询与分析，通常采用 **列式存储、分层建模（如ODS、DWD、DWS、ADS）** 和OLAP架构。
- 而数据库（如MySQL）则更关注**事务处理与实时数据存储**，支持高并发、高一致性的增删改查操作（OLTP），数据结构更规范，但不适合复杂计算和大规模分析。简单理解，数据库更像“业务运行的心脏”，而数据仓库是“企业决策的大脑”。两者定位不同、互补共生，共同构建完整的数据体系。

## 2. 你对于Hive和ClickHouse的理解。
- Hive 是构建在 Hadoop 之上的**数据仓库工具**，主要用于**大数据的离线批处理分析**，通过类 SQL 的 HQL 语句对底层的 HDFS 文件进行操作，执行效率依赖于 MapReduce 或 Tez/Spark 引擎，适用于数据规模大但实时性要求低的场景；
- 而 ClickHouse 是高性能的**列式数据库管理系统**，擅长**高并发、低延迟的实时分析查询**，支持向量化执行引擎、物化视图、MergeTree 等优化机制，适合对秒级响应有需求的 OLAP 场景。总结来说，Hive 更适合做**海量数据的离线计算**，ClickHouse 更适合做**高性能实时分析**，两者可结合用于数仓的不同层级和场景。


## 3. ClickHouse 的 MergeTree 引擎、分区分片、物化视图了解多少？

- MergeTree 是 ClickHouse 最核心、最常用的表引擎，它支持高性能的写入、范围查询、主键排序、后台合并等功能。数据写入后会先保存在多个小的分片（part）中，后台异步触发`合并（merge）`任务将小 part 合并为大 part，从而提高查询效率并减少文件数量。它支持设置 **主键（primary key）** 和 **排序键（ORDER BY）**，主键并不唯一，仅用于加速查询，数据实际是按排序键排序存储的。此外，MergeTree 系列有很多变种，如 ReplicatedMergeTree、ReplacingMergeTree 等，满足不同业务需求。

- ClickHouse 的分区（partition）和分片（shard）是两种不同层级的分布策略。**分区（partition）** 是对单张表在逻辑上划分数据块，常用按时间字段建分区（如 toYYYYMM(dt)），便于查询过滤和快速定位，减少扫描数据量。分区是物理文件夹结构，影响写入和查询性能。**分片（shard）** 是集群层面横向拆分数据到多个节点，每个节点存储部分数据，常用于海量数据分布式存储和计算，能显著提升并行查询能力。分片通常配合分布式表使用，通过 `distributed` 引擎管理多节点数据查询和路由。

- ClickHouse 的物化视图（Materialized View）是通过触发机制自动计算并持久化保存查询结果的视图，底层实现为一张独立的表。它在源表插入数据时自动执行指定的 `SELECT` 查询，并将结果写入目标表，因此非常适用于高频聚合或统计型查询的场景。物化视图支持异步写入，能够显著降低复杂查询的延迟。创建语法类似于：
```sql
CREATE MATERIALIZED VIEW view_name TO target_table AS SELECT ... FROM base_table;
```
    注意，物化视图只对新写入的数据生效，需提前设计好视图逻辑，并在业务允许的情况下使用追加写入模式。

## 4. ClickHouse与Hive相比都有什么优缺点？


>下面是**ClickHouse 与 Hive 的详细对比（从架构、性能、场景、生态等方面）**：

#### 1. 架构与存储模型  
- **ClickHouse** 是一个专为**OLAP分析优化**的列式数据库，采用**MergeTree**系列引擎进行高性能读写，支持本地磁盘存储，具备数据压缩和分区索引能力。  
- **Hive** 是基于 Hadoop 构建的**数据仓库工具**，本质是将 SQL 转化为 MapReduce/Spark 执行任务，存储依赖 HDFS，查询依赖外部计算引擎。  

**区别：** ClickHouse 为 C++ 原生引擎一体化架构，查询响应快；Hive 架构松散，需对接多个生态组件，部署维护更复杂。

#### 2. 查询性能  
- **ClickHouse** 的查询是原生支持的向量化执行、并行计算和数据跳跃索引，**毫秒到秒级返回结果**，适合低延迟分析。  
- **Hive** 查询依赖批处理引擎（如 MR/Spark/Tez），**执行延迟高**，一般在分钟级，适用于离线数据处理。  

**区别：** ClickHouse 更适合高并发、实时查询场景；Hive 更适合大规模离线数据 ETL 或历史归档分析。



#### 3. 数据写入能力  
- **ClickHouse** 写入为批量插入设计，**不适合频繁小写入或高并发 OLTP 场景**，但适合大批量数据定时写入（如日志系统）。  
- **Hive** 支持通过 HDFS 批量导入，写入开销较大，不适合频繁更新或插入操作，且缺乏事务机制。  

**区别：** 两者都不适合高频写操作，但 ClickHouse 的写入效率比 Hive 更高，且支持一定程度的数据更新能力（如 ReplacingMergeTree）。



#### 4. 实时能力  
- **ClickHouse** 原生支持实时插入 + 秒级查询，非常适合做实时报表、看板、业务监控系统。  
- **Hive** 属于离线批处理框架，**实时性差**，即使结合 Hudi/Iceberg 也只能实现准实时处理。  

**区别：**ClickHouse 强在**准实时分析**，Hive 更适合批处理数据仓库。



#### 5. 生态与扩展性  
- **ClickHouse** 是一个独立系统，生态围绕自身，缺乏 Hive 那样的 Hadoop 原生生态融合（如与 HDFS、Spark 的无缝整合）。  
- **Hive** 是 Hadoop 核心组成，天然兼容 HDFS、YARN、Tez、Spark 等，扩展性好，适合大公司做统一数据平台。  

**区别：** Hive 背靠 Hadoop 生态，扩展能力强；ClickHouse 部署轻量、维护简单，但集群扩展需额外配置。



#### 6. SQL 支持能力  
- **ClickHouse** 支持类 SQL 查询，函数丰富，但不完全兼容标准 SQL（如不支持事务、子查询有限制）。  
- **Hive** 支持标准 SQL，大量数据分析函数，兼容 ANSI SQL，便于团队协作。  

**区别：** Hive 更标准化、适合传统 BI；ClickHouse 偏向工程化、需学习其特有语法。



#### 7. 使用场景总结  
| 场景类别 | 推荐使用 ClickHouse | 推荐使用 Hive |
|----------|---------------------|----------------|
| 实时/准实时数据查询 | ✅ 强烈推荐 | ❌ 不适合 |
| 大规模离线 ETL | ❌ 一般 | ✅ 推荐 |
| OLAP 多维分析 | ✅ 高并发分析好 | ✅ 支持但慢 |
| 历史归档查询 | ✅ 支持 | ✅ 更常见 |
| 多人共享大数据平台 | ❌ 较弱 | ✅ 生态完善 |
| 运维和部署成本 | ✅ 轻量、易部署 | ❌ 复杂依赖多 |


#### 总结一句话记忆法  
> **“ClickHouse 快、轻、准实时，适合数据分析服务端；Hive 慢、稳、生态广，适合大数据批处理平台。”**


## 5. 大数据相关工具对比表

常见的：

| 工具/技术 | 本质角色 | 主要解决的问题 | 依赖关系 |
|-----------|-----------|----------------|-----------|
| **HDFS** | 分布式文件系统 | 存储超大数据文件 | Hadoop核心组件之一 |
| **MapReduce** | 分布式计算框架 | 并行处理大规模数据 | Hadoop核心组件之一 |
| **YARN** | 资源调度管理器 | 分配任务、资源 | Hadoop核心组件之一 |
| **Hadoop** | 大数据基础平台 | 管理“分布式存储+计算+调度” | —— |
| **Hive** | SQL转MapReduce的中间件 | 让熟悉SQL的人写MapReduce | 依赖Hadoop |
| **Spark** | 更快的内存计算引擎 | 替代MapReduce，快几十倍 | 可脱离Hadoop也可配合 |
| **Flink** | 实时流式计算引擎 | 处理“源源不断的数据流” | 和Spark类似 |
| **Kafka** | 分布式消息队列 | 解决“数据流动”问题（实时日志等） | 多用于实时场景 |
| **ClickHouse** | 列式数据库 | 快速读写+聚合分析（超强性能） | 不依赖Hadoop，适合单机 |
| **MySQL** | 行式数据库 | 常规事务型数据库 | 通用基础 |

更多的：

| 技术名称      | 分类           | 简要描述 |
|---------------|----------------|-----------|
| Hadoop        | 大数据框架     | 开源的分布式计算框架，核心包括 HDFS、YARN、MapReduce。 |
| HDFS          | 存储系统       | Hadoop 分布式文件系统，负责存储大规模数据。 |
| YARN          | 资源管理       | 管理计算资源并调度任务，是 Hadoop 的资源调度系统。 |
| MapReduce     | 编程模型       | Hadoop 的计算模型，将任务拆分为 Map 和 Reduce 阶段。 |
| Spark         | 计算引擎       | 内存计算引擎，支持批处理和流处理，速度快于 MapReduce。 |
| Flink         | 流处理引擎     | 实时数据处理引擎，支持批处理，适用于低延迟场景。 |
| Kafka         | 消息队列       | 高吞吐、分布式的消息发布订阅系统，常用于数据传输。 |
| Flume         | 数据采集工具   | 日志采集分发系统，适用于从多个源向 Hadoop 输送日志。 |
| MySQL         | 关系型数据库   | 主流开源关系数据库，适合中小型项目。 |
| ClickHouse    | 列式数据库     | 高性能的分析型数据库，适用于OLAP查询。 |
| MongoDB       | 文档型数据库   | NoSQL 数据库，数据以 JSON-like 文档形式存储。 |
| HBase         | 列族型数据库   | 基于HDFS的 NoSQL 数据库，适合海量稀疏数据。 |
| Hive          | 数据仓库工具   | 提供类 SQL 查询接口，将 SQL 转化为 MapReduce 执行。 |
| Storm         | 实时流处理框架 | 分布式实时计算系统，处理高吞吐低延迟数据流。 |
| Logstash      | 数据收集工具   | 用于日志的收集、解析、传输，常与 Elasticsearch 搭配。 |
| Elasticsearch | 搜索引擎       | 实时全文搜索和分析引擎，适合日志、指标等数据。 |
| Oracle        | 商业数据库     | 功能强大的关系型数据库系统，适用于大型企业应用。 |
| PostgreSQL    | 关系型数据库   | 功能强大、支持复杂查询和扩展性的开源数据库。 |
| Redis         | 缓存数据库     | 基于内存的 key-value 存储系统，支持多种数据结构。 |
| SQLite        | 嵌入式数据库   | 轻量级数据库，常用于移动端或小型应用。 |
| Neo4j         | 图数据库       | 适合处理网络结构数据，如社交关系或推荐系统。 |
| Cassandra     | 分布式数据库   | 高可用性的 NoSQL 数据库，擅长处理大规模数据。 |
| Cloudera      | 大数据平台     | 提供基于 Hadoop 的企业级大数据解决方案。 |
| CouchDB       | 文档型数据库   | 面向 Web 的 NoSQL 数据库，支持多版本控制。 |
| RapidMiner    | 数据挖掘平台   | 无代码/低代码机器学习平台，适合数据建模分析。 |
| OpenRefine    | 数据清洗工具   | 交互式数据清洗工具，适合结构化数据预处理。 |
| Azure         | 云平台         | 微软云服务，支持数据库、大数据、AI、容器等。 |
| Tableau       | 可视化工具     | 强大的商业智能（BI）平台，用于数据可视化分析。 |
| Superset      | 可视化平台     | 开源 BI 工具，支持 SQL 查询、仪表盘展示。 |
| PowerBI       | 可视化平台     | 微软推出的 BI 平台，广泛集成于 Office 生态。 |
| Druid         | 分析型数据库   | 面向 OLAP 的实时数据分析数据库，适合高并发低延迟查询。 |

