# 简历强相关面试题
## 1. 你对于数据仓库和数据库的理解。
- 数据仓库是为**支持企业级决策分析**而设计的专用系统，它以**主题化、集成化、稳定性和时变性**为核心特征，专注于存储**大量历史数据**并支持高效的查询与分析，通常采用 **列式存储、分层建模（如ODS、DWD、DWS、ADS）** 和OLAP架构。
- 而数据库（如MySQL）则更关注**事务处理与实时数据存储**，支持高并发、高一致性的增删改查操作（OLTP），数据结构更规范，但不适合复杂计算和大规模分析。简单理解，数据库更像“业务运行的心脏”，而数据仓库是“企业决策的大脑”。两者定位不同、互补共生，共同构建完整的数据体系。

## 2. 你对于Hive和ClickHouse的理解。
- Hive 是构建在 Hadoop 之上的**数据仓库工具**，主要用于**大数据的离线批处理分析**，通过类 SQL 的 HQL 语句对底层的 HDFS 文件进行操作，执行效率依赖于 MapReduce 或 Tez/Spark 引擎，适用于数据规模大但实时性要求低的场景；
- 而 ClickHouse 是高性能的**列式数据库管理系统**，擅长**高并发、低延迟的实时分析查询**，支持向量化执行引擎、物化视图、MergeTree 等优化机制，适合对秒级响应有需求的 OLAP 场景。总结来说，Hive 更适合做**海量数据的离线计算**，ClickHouse 更适合做**高性能实时分析**，两者可结合用于数仓的不同层级和场景。


## 3. ClickHouse 的 MergeTree 引擎、分区分片、物化视图了解多少？

- MergeTree 是 ClickHouse 最核心、最常用的表引擎，它支持高性能的写入、范围查询、主键排序、后台合并等功能。数据写入后会先保存在多个小的分片（part）中，后台异步触发“合并（merge）”任务将小 part 合并为大 part，从而提高查询效率并减少文件数量。它支持设置 **主键（primary key）** 和 **排序键（ORDER BY）**，主键并不唯一，仅用于加速查询，数据实际是按排序键排序存储的。此外，MergeTree 系列有很多变种，如 ReplicatedMergeTree、ReplacingMergeTree 等，满足不同业务需求。

- ClickHouse 的分区（partition）和分片（shard）是两种不同层级的分布策略。**分区（partition）** 是对单张表在逻辑上划分数据块，常用按时间字段建分区（如 toYYYYMM(dt)），便于查询过滤和快速定位，减少扫描数据量。分区是物理文件夹结构，影响写入和查询性能。**分片（shard）** 是集群层面横向拆分数据到多个节点，每个节点存储部分数据，常用于海量数据分布式存储和计算，能显著提升并行查询能力。分片通常配合分布式表使用，通过 `distributed` 引擎管理多节点数据查询和路由。

- ClickHouse 的物化视图（Materialized View）是通过触发机制自动计算并持久化保存查询结果的视图，底层实现为一张独立的表。它在源表插入数据时自动执行指定的 `SELECT` 查询，并将结果写入目标表，因此非常适用于高频聚合或统计型查询的场景。物化视图支持异步写入，能够显著降低复杂查询的延迟。创建语法类似于：
```sql
CREATE MATERIALIZED VIEW view_name TO target_table AS SELECT ... FROM base_table;
```
    注意，物化视图只对新写入的数据生效，需提前设计好视图逻辑，并在业务允许的情况下使用追加写入模式。
